<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>자유게시판 - 동네마켓</title>
    <link rel="stylesheet" th:href="@{/css/board.css}">
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>

<!-- Header 불러오기 -->
<div th:replace="/header :: header"></div>

<!-- 자유게시판 메인 섹션 -->
<section class="board-section">
    <div class="container board-container">
        <h2>💬 자유게시판</h2>

        <!-- 검색 영역 -->
        <div class="board-search">
            <form th:action="@{/board}" method="get">
                <select name="type">
                    <option value="title" th:selected="${type=='title'}">제목</option>
                    <option value="content" th:selected="${type=='content'}">내용</option>
                    <option value="writer" th:selected="${type=='writer'}">글쓴이</option>
                </select>
                <input type="text" name="keyword" th:value="${keyword}" placeholder="검색어를 입력하세요">
                <button type="submit">검색</button>
            </form>
        </div>

        <!-- 게시글 리스트 -->
        <table class="board-table">
            <thead>
                <tr>
                    <th>번호</th>
                    <th>제목</th>
                    <th>작성자</th>
                    <th>작성일</th>
                </tr>
            </thead>
            <tbody>
                <tr th:each="post : ${posts}">
                    <td th:text="${post.id}"></td>
                    <td><a th:href="@{/board/{id}(id=${post.id})}" th:text="${post.title}"></a></td>
                    <td th:text="${post.writer}"></td>
                    <td th:text="${#dates.format(post.createdDate, 'yyyy-MM-dd')}"></td>
                </tr>
            </tbody>
        </table>

        <!-- 글쓰기 버튼 -->
        <div class="write-btn">
            <a href="/board/write">글쓰기</a>
        </div>

        <!-- 페이징 -->
        <div class="board-pagination">
            <ul>
                <li th:if="${page.hasPrevious()}">
                    <a th:href="@{/board(page=${page.number-1}, type=${type}, keyword=${keyword})}">이전</a>
                </li>
                <li th:each="i : ${#numbers.sequence(0, page.totalPages-1)}" th:classappend="${i==page.number}? 'active'">
                    <a th:href="@{/board(page=${i}, type=${type}, keyword=${keyword})}" th:text="${i+1}"></a>
                </li>
                <li th:if="${page.hasNext()}">
                    <a th:href="@{/board(page=${page.number+1}, type=${type}, keyword=${keyword})}">다음</a>
                </li>
            </ul>
        </div>

    </div>
</section>

<!-- Footer 불러오기 -->
<div th:replace="/footer :: footer"></div>

</body>
</html>
